# Chiryu Connect - プロダクト要件定義書 (PRD)

## 1. プロジェクト概要

### 1.1 プロダクト名
**Chiryu Connect**（知立コネクト）

### 1.2 目的
知立市の地域コミュニティにおいて、ボランティア活動の募集者と参加希望者を効率的にマッチングするプラットフォームを提供する。

### 1.3 コンセプト
- **行政サイトの使いにくさを排除**: 直感的で分かりやすいUI/UX
- **Airbnbのようなモダンなデザイン**: 温かみがあり、親しみやすいビジュアル
- **モバイルファースト**: スマートフォンでの利用を最優先に設計

### 1.4 ターゲットユーザー
- **プライマリ**: 知立市在住・在勤のスマートフォンユーザー（20代〜60代）
- **セカンダリ**: 近隣市町村の住民、ボランティア活動に関心のある人

## 2. 技術スタック

### 2.1 Frontend
- **フレームワーク**: Next.js 16 (App Router)
- **スタイリング**: Tailwind CSS v4
- **UIコンポーネント**: Shadcn/ui

### 2.2 Backend
- **API**: Server Actions（API Routesなし）
- **データベース**: Turso (libSQL)
- **ORM**: Drizzle ORM

### 2.3 認証
- **プロバイダー**: Clerk

### 2.4 将来の拡張（Phase 2以降）
- **決済**: Stripe
- **AI**: OpenAI API（レコメンド機能）

## 3. MVP機能（Phase 1）

### 3.1 ユーザー認証
**機能概要**
- Clerkを使用した認証システム
- メールアドレス/パスワード認証
- ソーシャルログイン（Google, GitHub等）は将来実装

**要件**
- 新規登録フロー
- ログイン/ログアウト
- プロフィール編集（名前、自己紹介、プロフィール画像）
- 認証状態の管理

**制約**
- 18歳以上の利用を想定（年齢確認はPhase 2で実装）

### 3.2 ボランティア募集一覧
**機能概要**
- 募集投稿の一覧表示
- 検索・フィルタリング機能
- タグによる分類
- 無限スクロールによるページネーション

**要件**
- **表示項目**:
  - 募集タイトル
  - 募集者情報（名前、アバター）
  - 活動日時
  - 活動場所（地域名）
  - タグ（例: 「高齢者支援」「環境美化」「イベント運営」）
  - 募集人数
  - 投稿日時
- **検索機能**:
  - キーワード検索（タイトル、説明文）
  - タグ検索（複数選択可）
  - 地域検索（知立市内のエリア）
  - 日付範囲検索
- **ソート機能**:
  - 新着順（デフォルト）
  - 活動日時順
  - 応募者数順
- **UI要件**:
  - カード型レイアウト（モバイル最適化）
  - 画像サムネイル（任意）
  - 無限スクロール（20件ずつ読み込み）

### 3.3 募集詳細 & 応募機能
**機能概要**
- 募集投稿の詳細情報表示
- 応募ボタンによるマッチング開始

**要件**
- **詳細表示項目**:
  - 募集タイトル
  - 募集者プロフィール（名前、アバター、自己紹介、評価）
  - 活動詳細説明（マークダウン対応）
  - 活動日時（開始・終了時刻）
  - 活動場所（詳細住所、地図表示はPhase 2）
  - 募集人数 / 現在の応募者数
  - 必要なスキル・経験（任意）
  - 謝礼の有無・金額（表示のみ、決済はPhase 2）
  - タグ
  - 投稿日時・更新日時
- **応募機能**:
  - 「応募する」ボタン（募集者本人は非表示）
  - 応募確認ダイアログ
  - 応募後のステータス表示（「応募済み」「承認待ち」「承認済み」）
  - 応募キャンセル機能（承認前のみ）

**制約**
- 1ユーザーは1つの募集に1回のみ応募可能
- 募集者本人は自分の募集に応募不可

### 3.4 マッチング後のチャット機能
**機能概要**
- 応募が承認された後、募集者と応募者の間でチャットが可能
- LINE風のUIで親しみやすさを演出

**要件**
- **チャット機能**:
  - メッセージ送信（テキストのみ、Phase 1）
  - メッセージ受信通知（リアルタイムはPhase 2、Phase 1はページリロード時）
  - 既読機能（Phase 2）
  - メッセージ履歴の表示
- **UI要件**:
  - 送信者・受信者のメッセージを左右で区別
  - アバター表示
  - タイムスタンプ表示
  - モバイル最適化された入力UI
- **アクセス制御**:
  - マッチング済み（承認済み）のユーザーのみチャット可能
  - チャットルーム一覧ページ

### 3.5 マイページ
**機能概要**
- ユーザーの活動履歴とプロフィール管理

**要件**
- **表示項目**:
  - プロフィール情報（名前、自己紹介、アバター）
  - 投稿した募集一覧（「募集中」「募集終了」でフィルタ）
  - 応募した募集一覧（「応募済み」「承認待ち」「承認済み」「キャンセル済み」でフィルタ）
  - アクティブなチャット一覧
- **編集機能**:
  - プロフィール編集（名前、自己紹介、プロフィール画像）
  - 募集の編集・削除（自分の投稿のみ）
  - 応募のキャンセル（承認前のみ）

## 4. 将来の拡張機能（Phase 2以降）

### 4.1 謝礼のオンライン決済
- Stripe統合
- 募集時に謝礼金額を設定
- マッチング成立後の自動決済
- 決済履歴の管理

### 4.2 相互評価システム
- 活動完了後の評価・レビュー機能
- 5段階評価 + コメント
- ユーザープロフィールに評価スコア表示
- 評価の集計と表示

### 4.3 AIレコメンド
- OpenAI APIを使用した募集のレコメンド
- ユーザーの過去の応募履歴から興味関心を分析
- パーソナライズされた募集一覧の提供

### 4.4 その他の拡張機能
- プッシュ通知（活動日のリマインダー等）
- 地図連携（Google Maps API）
- 画像アップロード（募集詳細、チャット）
- 管理者機能（不適切な投稿の削除等）

## 5. 非機能要件

### 5.1 パフォーマンス
- ページ読み込み時間: 3秒以内（モバイル4G環境）
- 無限スクロールのスムーズな動作
- 画像の最適化（WebP形式、遅延読み込み）

### 5.2 セキュリティ
- 認証情報の安全な管理（Clerk）
- ユーザー入力のサニタイズ
- SQLインジェクション対策（Drizzle ORM）
- XSS対策

### 5.3 アクセシビリティ
- WCAG 2.1 Level AA準拠（将来実装）
- キーボードナビゲーション対応
- スクリーンリーダー対応（将来実装）

### 5.4 ブラウザサポート
- iOS Safari（最新2バージョン）
- Android Chrome（最新2バージョン）
- デスクトップブラウザはPhase 2で対応

## 6. 成功指標（KPI）

### 6.1 Phase 1
- 月間アクティブユーザー数: 100人以上
- 月間募集投稿数: 20件以上
- マッチング成立率: 30%以上
- ユーザー満足度: 4.0/5.0以上（アンケート調査）

### 6.2 Phase 2以降
- 月間アクティブユーザー数: 500人以上
- 決済取引額: 月間10万円以上
- 平均評価スコア: 4.5/5.0以上

## 7. リリース計画

### 7.1 Phase 1（MVP）
- **期間**: 3ヶ月
- **スコープ**: 本PRDの「3. MVP機能」をすべて実装
- **リリース**: ベータ版として知立市のコミュニティに公開

### 7.2 Phase 2
- **期間**: 2ヶ月
- **スコープ**: 決済機能、評価システム
- **リリース**: 正式版として広く公開

### 7.3 Phase 3以降
- AIレコメンド、その他の拡張機能を段階的に実装
