# Chiryu Connect - UXフロー設計書

## 概要

本ドキュメントでは、Chiryu Connectの画面遷移と各画面のUI構成要素を定義します。
モバイルファーストの設計で、Airbnbのような温かみのあるUIを目指します。

## 画面一覧

1. **認証画面**
   - ログイン
   - 新規登録
   - プロフィール設定（初回ログイン時）

2. **ホーム画面**
   - 募集一覧
   - 検索・フィルタ

3. **募集詳細画面**
   - 投稿詳細表示
   - 応募機能

4. **チャット画面**
   - チャットルーム一覧
   - チャット詳細

5. **マイページ**
   - プロフィール表示・編集
   - 投稿履歴
   - 応募履歴

6. **投稿作成画面**
   - 募集投稿フォーム

## 画面遷移図

```
[認証画面]
  ├─ ログイン成功 → [ホーム画面]
  └─ 新規登録成功 → [プロフィール設定] → [ホーム画面]

[ホーム画面]
  ├─ 募集カードタップ → [募集詳細画面]
  ├─ 検索・フィルタ → [ホーム画面]（フィルタ適用）
  ├─ 投稿ボタン → [投稿作成画面]
  └─ マイページアイコン → [マイページ]

[募集詳細画面]
  ├─ 応募ボタン → [応募確認ダイアログ] → [募集詳細画面]（応募済み状態）
  ├─ 募集者プロフィールタップ → [募集者プロフィール]（将来実装）
  └─ 戻る → [ホーム画面]

[チャットルーム一覧]
  └─ チャットルームタップ → [チャット詳細]

[チャット詳細]
  ├─ メッセージ送信 → [チャット詳細]（更新）
  └─ 戻る → [チャットルーム一覧]

[マイページ]
  ├─ プロフィール編集 → [プロフィール編集モーダル]
  ├─ 投稿履歴タブ → [投稿一覧]
  ├─ 応募履歴タブ → [応募一覧]
  ├─ チャット一覧タブ → [チャットルーム一覧]
  └─ 投稿作成 → [投稿作成画面]

[投稿作成画面]
  ├─ 投稿成功 → [募集詳細画面]（作成した投稿）
  └─ キャンセル → [ホーム画面]
```

## 各画面の詳細設計

### 1. 認証画面

#### 1.1 ログイン画面

**レイアウト**
- フルスクリーン（モバイル）
- 中央配置のログインフォーム

**UI要素**
- **ヘッダー**: アプリロゴ + 「Chiryu Connect」
- **フォーム**:
  - メールアドレス入力フィールド
  - パスワード入力フィールド（表示/非表示トグル）
  - 「ログイン」ボタン（プライマリ）
  - 「パスワードを忘れた場合」リンク
- **フッター**:
  - 「アカウントをお持ちでない方はこちら」リンク → 新規登録画面へ

**デザイン**
- 背景: グラデーション（温かみのある色合い）
- カード型のフォームコンテナ（白背景、角丸、シャドウ）

#### 1.2 新規登録画面

**レイアウト**
- ログイン画面と同様のレイアウト

**UI要素**
- **フォーム**:
  - メールアドレス入力フィールド
  - パスワード入力フィールド（強度インジケーター）
  - パスワード確認入力フィールド
  - 「登録」ボタン（プライマリ）
- **フッター**:
  - 「既にアカウントをお持ちの方はこちら」リンク → ログイン画面へ

#### 1.3 プロフィール設定画面（初回ログイン時）

**レイアウト**
- フルスクリーン（モバイル）
- ステップインジケーター（1/2）

**UI要素**
- **ステップ1: 基本情報**
  - 名前入力フィールド（必須）
  - 自己紹介テキストエリア（任意、最大500文字、カウンター表示）
  - 「次へ」ボタン
- **ステップ2: プロフィール画像**
  - 画像アップロードエリア（ドラッグ&ドロップ対応）
  - プレビュー表示
  - 「完了」ボタン → ホーム画面へ

**デザイン**
- カード型のフォーム
- 画像アップロードは円形のプレースホルダー

### 2. ホーム画面

#### 2.1 レイアウト

**構造**
- **ヘッダー**（固定）:
  - アプリロゴ（左）
  - 検索アイコン（右）
  - マイページアイコン（右）
- **検索バー**（折りたたみ可能）:
  - キーワード検索入力
  - フィルタボタン（タグ、地域、日付）
- **募集一覧**（メインコンテンツ）:
  - 無限スクロール
  - カード型レイアウト
  - 読み込み中インジケーター

#### 2.2 募集カード

**UI要素**
- **画像エリア**（左上）:
  - サムネイル画像（16:9アスペクト比）
  - またはデフォルト画像（アイコン）
- **タグバッジ**（画像上、右上）:
  - 最大3つ表示、それ以上は「+N」
- **コンテンツエリア**:
  - **タイトル**（太字、最大2行、省略）
  - **募集者情報**（アバター + 名前、横並び）
  - **活動日時**（アイコン + 日時、横並び）
  - **活動場所**（アイコン + 場所名、横並び）
  - **募集人数**（アイコン + 「3/5人」形式、横並び）
- **フッター**（カード下部）:
  - 投稿日時（相対時間表示、例: 「2時間前」）

**デザイン**
- カード: 白背景、角丸、シャドウ、ホバーエフェクト
- タグ: 小さなバッジ、色分け
- アイコン: Lucide Reactアイコン、グレー系

**インタラクション**
- タップ → 募集詳細画面へ
- スワイプ（将来実装） → お気に入り追加

#### 2.3 検索・フィルタモーダル

**UI要素**
- **タブ**:
  - 「キーワード」
  - 「タグ」
  - 「地域」
  - 「日付」
- **キーワードタブ**:
  - 検索入力フィールド
- **タグタブ**:
  - タグ一覧（チェックボックス、複数選択可）
  - 選択中のタグ表示
- **地域タブ**:
  - 地域一覧（ラジオボタン、単一選択）
- **日付タブ**:
  - カレンダーピッカー（日付範囲選択）
- **アクションボタン**:
  - 「リセット」ボタン（セカンダリ）
  - 「適用」ボタン（プライマリ）

**デザイン**
- フルスクリーンモーダル（モバイル）
- ボトムシート形式

### 3. 募集詳細画面

#### 3.1 レイアウト

**構造**
- **ヘッダー**（固定）:
  - 戻るボタン（左）
  - タイトル（中央、省略）
  - 共有ボタン（右、将来実装）
- **スクロール可能コンテンツ**:
  - 画像ギャラリー（スワイプ可能、Phase 1は1枚のみ）
  - タグバッジ
  - タイトル
  - 募集者情報カード
  - 活動詳細セクション
  - 応募者情報セクション（募集者のみ表示）
- **フッター**（固定）:
  - 「応募する」ボタン（プライマリ、応募済みの場合は「応募済み」表示）

#### 3.2 UI要素の詳細

**画像ギャラリー**
- フル幅、16:9アスペクト比
- スワイプで切り替え（将来実装）
- 画像がない場合はデフォルト画像

**募集者情報カード**
- アバター（円形、大）
- 名前
- 自己紹介（最大3行、省略）
- 「プロフィールを見る」リンク（将来実装）

**活動詳細セクション**
- **アイコン + ラベル + 値**の形式で表示:
  - 📅 活動日時: 「2024年3月15日 10:00 - 14:00」
  - 📍 活動場所: 「知立市○○町1-1」
  - 👥 募集人数: 「3/5人」
  - 💰 謝礼: 「1,000円」または「謝礼なし」
  - 🏷️ タグ: バッジ一覧
- **説明文**:
  - マークダウン対応
  - 改行、リスト、太字などに対応

**応募者情報セクション**（募集者のみ表示）
- 応募者一覧（カード型）
- 各応募者カード:
  - アバター + 名前
  - 応募メッセージ（あれば）
  - ステータスバッジ（「承認待ち」「承認済み」）
  - アクションボタン（「承認」「却下」）

**応募ボタン**
- 募集者本人: 非表示
- 既に応募済み: 「応募済み」表示（グレーアウト）
- 募集終了: 「募集終了」表示（グレーアウト）
- その他: 「応募する」ボタン（プライマリ）

#### 3.3 応募確認ダイアログ

**UI要素**
- モーダルダイアログ
- タイトル: 「応募を確認」
- メッセージ: 「この募集に応募しますか？」
- 応募メッセージ入力（任意、テキストエリア）
- アクションボタン:
  - 「キャンセル」（セカンダリ）
  - 「応募する」（プライマリ）

### 4. チャット画面

#### 4.1 チャットルーム一覧

**レイアウト**
- **ヘッダー**（固定）:
  - タイトル「チャット」
- **ルーム一覧**（スクロール可能）:
  - 各ルームカード

**ルームカード**
- **左側**: 相手のアバター（円形）
- **中央**:
  - 相手の名前（太字）
  - 最後のメッセージ（1行、省略、グレー）
  - タイムスタンプ（相対時間、右寄せ）
- **右側**: 未読バッジ（未読がある場合、Phase 2）

**インタラクション**
- タップ → チャット詳細画面へ

#### 4.2 チャット詳細

**レイアウト**
- **ヘッダー**（固定）:
  - 戻るボタン（左）
  - 相手の名前 + アバター（中央）
  - メニューボタン（右、将来実装）
- **メッセージエリア**（スクロール可能）:
  - メッセージバブル（送信/受信で左右に分かれる）
- **入力エリア**（固定）:
  - テキスト入力フィールド
  - 送信ボタン

**メッセージバブル**

**送信メッセージ**（右寄せ）:
- バブル: プライマリカラー背景、白文字
- タイムスタンプ: バブル下、右寄せ、小さな文字

**受信メッセージ**（左寄せ）:
- アバター（小さな円形）
- バブル: グレー背景、黒文字
- タイムスタンプ: バブル下、左寄せ、小さな文字

**デザイン**
- LINE風の丸みのあるバブル
- メッセージ間のスペーシング
- スクロール位置は最新メッセージ（初期表示）

**インタラクション**
- メッセージ送信: Enterキーまたは送信ボタン
- スクロール: 自動で最新メッセージへ（送信時）

### 5. マイページ

#### 5.1 レイアウト

**構造**
- **プロフィールセクション**（上部）:
  - アバター（円形、大）
  - 名前
  - 自己紹介（最大3行、省略）
  - 「編集」ボタン
- **タブナビゲーション**:
  - 「投稿した募集」
  - 「応募した募集」
  - 「チャット」
- **コンテンツエリア**（タブに応じて切り替え）:
  - 各タブの一覧表示

#### 5.2 プロフィール編集モーダル

**UI要素**
- フルスクリーンモーダル（モバイル）
- **フォーム**:
  - アバター編集（画像アップロード、プレビュー）
  - 名前入力フィールド
  - 自己紹介テキストエリア（最大500文字、カウンター）
- **アクションボタン**:
  - 「キャンセル」（セカンダリ）
  - 「保存」（プライマリ）

#### 5.3 投稿した募集一覧

**UI要素**
- 募集カード（ホーム画面と同様）
- ステータスバッジ（「募集中」「募集終了」「キャンセル済み」）
- アクションボタン（各カード）:
  - 「編集」（募集中のみ）
  - 「削除」（募集中のみ）
  - 「応募者を見る」（募集中のみ）

**フィルタ**
- 「すべて」「募集中」「募集終了」タブ

#### 5.4 応募した募集一覧

**UI要素**
- 募集カード（ホーム画面と同様）
- ステータスバッジ（「応募済み」「承認待ち」「承認済み」「キャンセル済み」）
- アクションボタン（各カード）:
  - 「キャンセル」（承認待ちのみ）
  - 「チャットを開く」（承認済みのみ）

**フィルタ**
- 「すべて」「承認待ち」「承認済み」タブ

### 6. 投稿作成画面

#### 6.1 レイアウト

**構造**
- **ヘッダー**（固定）:
  - キャンセルボタン（左）
  - タイトル「募集を投稿」（中央）
  - 投稿ボタン（右、無効状態で開始）
- **フォーム**（スクロール可能）:
  - 各入力フィールド

#### 6.2 フォーム項目

**必須項目**:
1. **タイトル**（テキスト入力、最大100文字、カウンター）
2. **活動日時**（日時ピッカー、開始時刻 + 終了時刻）
3. **活動場所**（テキスト入力、最大200文字）
4. **募集人数**（数値入力、1-100）
5. **詳細説明**（テキストエリア、マークダウン対応、最大5000文字、カウンター）

**任意項目**:
6. **画像**（画像アップロード、最大3枚、Phase 1は1枚のみ）
7. **タグ**（チェックボックス、複数選択可、最大5つ）
8. **必要なスキル・経験**（テキストエリア、最大500文字）
9. **謝礼**（ラジオボタン「あり」「なし」→ ありの場合、金額入力）

**バリデーション**
- リアルタイムバリデーション
- エラーメッセージは各フィールド下に表示
- 必須項目がすべて入力され、エラーがない場合のみ投稿ボタン有効化

**デザイン**
- カード型のフォームセクション
- セクション間のスペーシング
- プレースホルダーテキスト

## 共通UI要素

### ナビゲーション

**ボトムナビゲーション**（将来実装）:
- ホーム
- 検索
- 投稿
- チャット
- マイページ

**現在の実装**（Phase 1）:
- ヘッダーのアイコンでナビゲーション

### ローディング状態

- **スケルトンローディング**: 一覧読み込み時
- **スピナー**: ボタンクリック時（送信中など）
- **無限スクロール**: 下部にローディングインジケーター

### エラー状態

- **エラーメッセージ**: トースト通知（右上）
- **空状態**: イラスト + メッセージ（例: 「募集がありません」）

### トースト通知

- 成功: 緑色、チェックアイコン
- エラー: 赤色、エラーアイコン
- 情報: 青色、情報アイコン

## レスポンシブデザイン

### ブレークポイント

- **モバイル**: 375px - 768px（メインターゲット）
- **タブレット**: 768px - 1024px（将来対応）
- **デスクトップ**: 1024px以上（将来対応）

### モバイル最適化

- タッチターゲット: 最低44x44px
- フォントサイズ: 最小16px（iOS Safariのズーム防止）
- スクロール: スムーズスクロール
- 入力フィールド: 適切なキーボードタイプ（email, tel等）

## アクセシビリティ（将来実装）

- キーボードナビゲーション
- スクリーンリーダー対応
- コントラスト比の確保（WCAG 2.1 AA）
- フォーカスインジケーター
